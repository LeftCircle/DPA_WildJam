[gd_scene format=3 uid="uid://bnt0x2atitjy4"]

[ext_resource type="Script" uid="uid://btk0heslwdsdl" path="res://scenes/characters/players/character.gd" id="1_1bdar"]
[ext_resource type="Texture2D" uid="uid://hvtketacwvwl" path="res://icon.svg" id="1_x31xa"]
[ext_resource type="Script" uid="uid://ccpfg8mkwq6u6" path="res://scenes/characters/states/sm_character.gd" id="3_2qjml"]
[ext_resource type="BlackboardPlan" uid="uid://jquj81t3d3xq" path="res://resources/character/player_blackboard.tres" id="3_y3q2w"]
[ext_resource type="Script" uid="uid://bl58xmmt8lpct" path="res://scenes/characters/states/on_ground.gd" id="4_ma1fs"]
[ext_resource type="Script" uid="uid://c835gp74gd31s" path="res://scenes/characters/states/in_air.gd" id="5_ma1fs"]
[ext_resource type="Script" uid="uid://b7lmgww4w6p4" path="res://resources/character/CoyoteTimer.gd" id="5_oxdt7"]
[ext_resource type="Resource" uid="uid://cp2xagdfik1wc" path="res://resources/character/PlayerHorizontalMovement.tres" id="6_al1dr"]
[ext_resource type="Script" uid="uid://b3scqiwxsp3ai" path="res://scenes/characters/states/dash.gd" id="6_eqpns"]
[ext_resource type="Script" uid="uid://c7cdvchn6xmqc" path="res://scenes/characters/states/jump_state.gd" id="8_fwqwt"]
[ext_resource type="Script" uid="uid://dshk7xfko5k4n" path="res://scenes/characters/players/input_processor.gd" id="8_ymfos"]
[ext_resource type="Script" uid="uid://hhqyur0hswxn" path="res://scenes/characters/states/throw_state.gd" id="11_7lw86"]
[ext_resource type="PackedScene" uid="uid://rxkask47dfie" path="res://scenes/objects/feather/thrown_feather.tscn" id="12_3omnj"]
[ext_resource type="Texture2D" uid="uid://djhvm2ypm6j4n" path="res://assets/characters/wings/TestWingSpriteSheet.png" id="12_yqo81"]
[ext_resource type="Script" uid="uid://c8dvwd1im3862" path="res://scenes/characters/players/PlayerAnimationTree.gd" id="13_kgru6"]
[ext_resource type="Texture2D" uid="uid://bx2ilo45uwif0" path="res://assets/characters/player/TestMCSpriteSheetV2.png" id="15_12orm"]

[sub_resource type="CanvasItemMaterial" id="CanvasItemMaterial_kgru6"]
light_mode = 1

[sub_resource type="RectangleShape2D" id="RectangleShape2D_al1dr"]
size = Vector2(10, 15.624997)

[sub_resource type="Resource" id="Resource_ymfos"]
script = ExtResource("5_oxdt7")
metadata/_custom_type_script = "uid://b7lmgww4w6p4"

[sub_resource type="Curve" id="Curve_fwqwt"]
_data = [Vector2(0.12666667, 1), 0.0, 0.0, 0, 0, Vector2(0.21666667, 0.99499995), 0.0, 0.0, 0, 0, Vector2(0.43666667, 0), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 4

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_wllcr"]
animation = &"DoubleJumpLeft"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_ntitv"]
animation = &"DoubleJumpRight"

[sub_resource type="AnimationNodeBlendSpace1D" id="AnimationNodeBlendSpace1D_5hhuf"]
blend_point_0/node = SubResource("AnimationNodeAnimation_wllcr")
blend_point_0/pos = -1.0
blend_point_1/node = SubResource("AnimationNodeAnimation_ntitv")
blend_point_1/pos = 1.0
blend_mode = 1

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_uiu2b"]
animation = &"RESET"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_12orm"]
animation = &"WalkLeft"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_kgru6"]
animation = &"WalkRight"

[sub_resource type="AnimationNodeBlendSpace1D" id="AnimationNodeBlendSpace1D_uiu2b"]
blend_point_0/node = SubResource("AnimationNodeAnimation_12orm")
blend_point_0/pos = -1.0
blend_point_1/node = SubResource("AnimationNodeAnimation_kgru6")
blend_point_1/pos = 1.0
blend_mode = 1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_12orm"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_kgru6"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_wllcr"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_ntitv"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_uiu2b"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_5hhuf"]

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_wllcr"]
states/DoubleJump/node = SubResource("AnimationNodeBlendSpace1D_5hhuf")
states/DoubleJump/position = Vector2(546.4478, 212.33333)
states/RESET/node = SubResource("AnimationNodeAnimation_uiu2b")
states/RESET/position = Vector2(155.2604, 200.99998)
states/Start/position = Vector2(156, 94.59259)
states/Walk/node = SubResource("AnimationNodeBlendSpace1D_uiu2b")
states/Walk/position = Vector2(421.11453, 94.00274)
transitions = ["Start", "Walk", SubResource("AnimationNodeStateMachineTransition_12orm"), "Walk", "End", SubResource("AnimationNodeStateMachineTransition_kgru6"), "Walk", "RESET", SubResource("AnimationNodeStateMachineTransition_wllcr"), "RESET", "Walk", SubResource("AnimationNodeStateMachineTransition_ntitv"), "DoubleJump", "RESET", SubResource("AnimationNodeStateMachineTransition_uiu2b"), "RESET", "DoubleJump", SubResource("AnimationNodeStateMachineTransition_5hhuf")]
graph_offset = Vector2(99.78119, 57)

[sub_resource type="Animation" id="Animation_uiu2b"]
resource_name = "DoubleJumpLeft"
length = 0.50000167
loop_mode = 1
step = 0.016666668
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Wings:visible")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(-0.033333335, 0),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [true, true]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Wings:frame")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.099999994, 0.18333334, 0.23333333, 0.38333336, 0.43333337),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 1,
"values": [0, 1, 2, 3, 4, 5]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Wings:scale")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(-1, 1)]
}

[sub_resource type="Animation" id="Animation_yqo81"]
resource_name = "DoubleJump_00"
length = 0.50000167
loop_mode = 1
step = 0.016666668
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Wings:visible")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.50000167),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [true, false]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Wings:frame")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.1, 0.18333334, 0.23333333, 0.38333333, 0.43333334),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 1,
"values": [0, 1, 2, 3, 4, 5]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Wings:scale")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(1, 1)]
}

[sub_resource type="Animation" id="Animation_7lw86"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Wings:visible")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Wings:frame")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [0]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("WalkingSpriteSheet:visible")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("WalkingSpriteSheet:frame")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [8]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("WalkingSpriteSheet:scale")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(1, 1)]
}

[sub_resource type="Animation" id="Animation_12orm"]
resource_name = "WalkLeft"
loop_mode = 1
step = 0.125
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("WalkingSpriteSheet:visible")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("WalkingSpriteSheet:frame")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.125, 0.25, 0.375, 0.5, 0.625, 0.75, 0.875),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [1, 2, 3, 4, 5, 6, 7, 8]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("WalkingSpriteSheet:scale")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(-1, 1)]
}

[sub_resource type="Animation" id="Animation_kgru6"]
resource_name = "WalkRight"
loop_mode = 1
step = 0.125
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("WalkingSpriteSheet:visible")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("WalkingSpriteSheet:frame")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.125, 0.25, 0.375, 0.5, 0.625, 0.75, 0.875),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [1, 2, 3, 4, 5, 6, 7, 8]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("WalkingSpriteSheet:scale")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(1, 1)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_7lw86"]
_data = {
&"DoubleJumpLeft": SubResource("Animation_uiu2b"),
&"DoubleJumpRight": SubResource("Animation_yqo81"),
&"RESET": SubResource("Animation_7lw86"),
&"WalkLeft": SubResource("Animation_12orm"),
&"WalkRight": SubResource("Animation_kgru6")
}

[node name="Character" type="CharacterBody2D" unique_id=608707863]
material = SubResource("CanvasItemMaterial_kgru6")
collision_layer = 2
collision_mask = 9
script = ExtResource("1_1bdar")

[node name="Sprite2D" type="Sprite2D" parent="." unique_id=1579326263]
visible = false
position = Vector2(-0.9999981, -50.5)
scale = Vector2(0.5, 0.7890625)
texture = ExtResource("1_x31xa")

[node name="CollisionShape2D" type="CollisionShape2D" parent="." unique_id=1548995392]
position = Vector2(1.1368684e-13, -50)
scale = Vector2(6.4, 6.4)
shape = SubResource("RectangleShape2D_al1dr")

[node name="SM_Character" type="LimboHSM" parent="." unique_id=1789133882 node_paths=PackedStringArray("character", "input_processor")]
blackboard_plan = ExtResource("3_y3q2w")
script = ExtResource("3_2qjml")
character = NodePath("..")
input_processor = NodePath("../InputProcessor")

[node name="OnGround" type="LimboState" parent="SM_Character" unique_id=1913486763 node_paths=PackedStringArray("character", "input_processor", "anim_tree")]
blackboard_plan = ExtResource("3_y3q2w")
script = ExtResource("4_ma1fs")
horizontal_movement = ExtResource("6_al1dr")
character = NodePath("../..")
input_processor = NodePath("../../InputProcessor")
coyote_timer = SubResource("Resource_ymfos")
anim_tree = NodePath("../../AnimationTree")

[node name="InAir" type="LimboState" parent="SM_Character" unique_id=366118137 node_paths=PackedStringArray("character", "ground_state", "input_processor", "anim_tree")]
script = ExtResource("5_ma1fs")
character = NodePath("../..")
ground_state = NodePath("../OnGround")
horizontal_movement = ExtResource("6_al1dr")
input_processor = NodePath("../../InputProcessor")
anim_tree = NodePath("../../AnimationTree")

[node name="DashState" type="LimboState" parent="SM_Character" unique_id=476023899 node_paths=PackedStringArray("input_processor")]
script = ExtResource("6_eqpns")
input_processor = NodePath("../../InputProcessor")
metadata/_custom_type_script = "uid://b3scqiwxsp3ai"

[node name="JumpState" type="LimboState" parent="SM_Character" unique_id=685114196 node_paths=PackedStringArray("air_state", "input_processor", "character")]
script = ExtResource("8_fwqwt")
jump_duration = 1.0
jump_max_speed = 550.0
jump_curve = SubResource("Curve_fwqwt")
air_state = NodePath("../InAir")
horizontal_movement = ExtResource("6_al1dr")
input_processor = NodePath("../../InputProcessor")
character = NodePath("../..")
metadata/_custom_type_script = "uid://c7cdvchn6xmqc"

[node name="ThrowState" type="LimboState" parent="SM_Character" unique_id=196387958 node_paths=PackedStringArray("input_processor", "throw_point", "projectile_container", "character")]
script = ExtResource("11_7lw86")
projectile_ps = ExtResource("12_3omnj")
input_processor = NodePath("../../InputProcessor")
impulse_force = 2800.0
throw_point = NodePath("../../ThrowPoint")
projectile_container = NodePath("../../ProjectileContainer")
character = NodePath("../..")
metadata/_custom_type_script = "uid://hhqyur0hswxn"

[node name="AnimationTree" type="AnimationTree" parent="." unique_id=319241558]
tree_root = SubResource("AnimationNodeStateMachine_wllcr")
anim_player = NodePath("../AnimationPlayer")
parameters/DoubleJump/blend_position = -0.21879023
parameters/Walk/blend_position = -1.0
script = ExtResource("13_kgru6")

[node name="InputProcessor" type="Node" parent="." unique_id=656449399]
script = ExtResource("8_ymfos")

[node name="Camera2D" type="Camera2D" parent="." unique_id=80016861]
zoom = Vector2(0.6, 0.6)
limit_smoothed = true
position_smoothing_enabled = true

[node name="Wings" type="Sprite2D" parent="." unique_id=2074299470]
visible = false
position = Vector2(0, -55)
scale = Vector2(1e-05, 1e-05)
texture = ExtResource("12_yqo81")
hframes = 6

[node name="AnimationPlayer" type="AnimationPlayer" parent="." unique_id=1279856151]
libraries/ = SubResource("AnimationLibrary_7lw86")

[node name="ProjectileContainer" type="Node" parent="." unique_id=1092862845]

[node name="ThrowPoint" type="Node2D" parent="." unique_id=242450336]
position = Vector2(0, -123)

[node name="WalkingSpriteSheet" type="Sprite2D" parent="." unique_id=541385406]
visible = false
position = Vector2(0, -47)
texture = ExtResource("15_12orm")
hframes = 9
frame = 8
